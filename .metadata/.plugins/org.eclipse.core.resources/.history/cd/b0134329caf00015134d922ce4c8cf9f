package com.maven.weekThree;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

public class StaffTypeModel {
	private int id; 
	private String name;
	
	private final static String mTableName = "stafftype";
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}

	private static StaffTypeModel mPosModel;
	
	public ArrayList<StaffTypeModel> getAll() throws Exception{
		ArrayList<StaffTypeModel> res = new ArrayList<StaffTypeModel>();
		String sql ="select * from "+mTableName;
		ResultSet rs = PostgreSQLJDBC.getInstancce().executeQuery(sql);
	
		//Handle returned data 
		while(rs.next()){
			int id = rs.getInt("id"); // id column
			String name = rs.getString("name"); // name column 
			StaffTypeModel posModel = new StaffTypeModel(id,name);
			res.add(posModel);
		}
		return res;
	}
	
	public Boolean updateInfo(StaffTypeModel staffType){  
		String sql = String.format("UPDATE %s SET name='%s' WHERE id=%d", mTableName,staffType.name, staffType.id);
		return PostgreSQLJDBC.getInstancce().executeUpdate(sql);
	}
	/**
	 * @param id
	 * @param name
	 */
	public StaffTypeModel(int id, String name) {
		super();
		this.id = id;
		this.name = name;
	}
	/**
	 * 
	 */
	public StaffTypeModel() {
		super();
	}
	
	public static StaffTypeModel getInstancce(){
		if(mPosModel == null){
			mPosModel = new StaffTypeModel();
		}
		return mPosModel;
	}
}
